<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Personal Brand Portfolio - Lin</title>
    
    <!-- 1. 載入 Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- 2. 載入 React 和 ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- 3. 載入 Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- 定義動畫與樣式 -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&family=Noto+Serif+TC:wght@400;700&display=swap');

        /* V12: 固定懸浮導覽列 (Fixed Bottom) + 三合一按鈕 */
        
        html {
            width: 100%;
            height: auto;
            -webkit-text-size-adjust: 100%;
        }

        body {
            margin: 0;
            padding: 0;
            width: 100%;
            /* 保持原生滾動，確保手機瀏覽體驗最順暢 */
            overflow-y: auto; 
            overflow-x: hidden;
            background-color: #FDFCF8;
            font-family: 'Noto Sans TC', sans-serif;
            color: #8b7355;
            -webkit-overflow-scrolling: touch;
        }

        #root {
            width: 100%;
            min-height: 100vh;
            position: relative;
            /* 底部增加足夠的留白，防止內容被懸浮導覽列遮擋 */
            padding-bottom: 100px; 
        }

        /* 背景層 */
        .bg-layer {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            z-index: -1;
            pointer-events: none;
            overflow: hidden;
            transform: translateZ(0);
        }

        /* V12 核心：固定懸浮導覽列 (Fixed Bottom) */
        .nav-fixed-container {
            position: fixed; /* 固定在視窗，不隨滾動移動 */
            bottom: 30px;    /* 距離底部 */
            left: 0;
            right: 0;
            z-index: 9999;   /* 最高層級，確保浮在內容之上 */
            display: flex;
            justify-content: center;
            pointer-events: none; /* 容器本身不擋點擊 */
            width: 100%;
        }

        .nav-pill {
            pointer-events: auto; /* 按鈕恢復點擊 */
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 255, 255, 0.8);
            padding: 8px 12px; /* 稍微增加內距 */
            border-radius: 50px;
            box-shadow: 0 10px 40px -10px rgba(139, 115, 85, 0.2), 
                        0 0 0 1px rgba(139, 115, 85, 0.05);
            display: flex;
            align-items: center;
            justify-content: space-between; /* 關鍵：讓按鈕分散對齊 */
            gap: 10px; /* 增加按鈕間距 */
            width: 92%; /* 關鍵：拉寬導覽列寬度 */
            max-width: 500px; /* 增加最大寬度限制 */
            transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        /* 按鈕樣式 */
        .nav-btn {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 12px 0; /* 調整內距 */
            border-radius: 40px;
            transition: all 0.3s ease;
            min-width: 80px;
            flex: 1; /* 關鍵：讓左右按鈕自動填滿空間 */
            position: relative;
            border: none;
            background: transparent;
        }

        .nav-btn.active {
            background-color: #8b7355;
            color: white;
            box-shadow: 0 4px 12px rgba(139, 115, 85, 0.25);
        }

        .nav-btn.inactive {
            color: #bfa890;
        }
        
        .nav-btn.inactive:hover {
            color: #8b7355;
            background-color: rgba(139, 115, 85, 0.05);
        }

        /* 中間的靈感按鈕 - 特殊樣式 */
        .muse-btn-wrapper {
            position: relative;
            margin: 0 8px; /* 增加左右間距 */
            flex-shrink: 0; /* 防止中間按鈕被壓縮 */
        }

        .muse-btn {
            width: 56px;
            height: 56px;
            border-radius: 50%;
            background: linear-gradient(135deg, #E8DCC8 0%, #fff 100%);
            border: 2px solid #fff;
            color: #8b7355;
            box-shadow: 0 4px 15px rgba(139, 115, 85, 0.15);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
            transform: translateY(-5px); /* 稍微突出 */
        }

        .muse-btn:active {
            transform: translateY(-5px) scale(0.95);
        }

        .nav-label {
            font-size: 15px; /* 放大文字 */
            margin-top: 0;   /* 移除上方間距 */
            font-weight: 500;
            letter-spacing: 0.05em;
        }

        /* 動畫 */
        .animate-fade-in { animation: fadeIn 0.6s ease-out forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .scrollbar-hide::-webkit-scrollbar { display: none; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- 1. Icon Components ---
        const IconBase = ({ children, size = 24, className, ...props }) => (<svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className} {...props}>{children}</svg>);
        const Instagram = (props) => <IconBase {...props}><rect width="20" height="20" x="2" y="2" rx="5" ry="5"/><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"/><line x1="17.5" x2="17.51" y1="6.5" y2="6.5"/></IconBase>;
        const FileText = (props) => <IconBase {...props}><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/></IconBase>;
        const Layout = (props) => <IconBase {...props}><rect width="18" height="18" x="3" y="3" rx="2" ry="2"/><line x1="3" x2="21" y1="9" y2="9"/><line x1="9" x2="9" y1="21" y2="9"/></IconBase>;
        const Mail = (props) => <IconBase {...props}><rect width="20" height="16" x="2" y="4" rx="2"/><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"/></IconBase>;
        const Copy = (props) => <IconBase {...props}><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/></IconBase>;
        const Check = (props) => <IconBase {...props}><path d="M20 6 9 17l-5-5"/></IconBase>;
        const Star = (props) => <IconBase {...props}><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></IconBase>;
        const X = (props) => <IconBase {...props}><path d="M18 6 6 18"/><path d="m6 6 12 12"/></IconBase>;
        const ChevronRight = (props) => <IconBase {...props}><path d="m9 18 6-6-6-6"/></IconBase>;
        
        // 確保 MessageCircle 定義存在
        const MessageCircle = (props) => <IconBase {...props}><path d="m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z"/></IconBase>;
        
        const Sparkles = (props) => <IconBase {...props}><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"/><path d="M5 3 4 6 1 7l3 1 1 3 1-3 3-1-3-1-1-3Z"/><path d="M2 17 1 20l-3 1 3 1 1 3 1-3 3-1-3-1-1-3Z"/></IconBase>;
        const Loader2 = (props) => <IconBase {...props}><path d="M21 12a9 9 0 1 1-6.219-8.56"/></IconBase>;
        const Palette = (props) => <IconBase {...props}><circle cx="13.5" cy="6.5" r=".5"/><circle cx="17.5" cy="10.5" r=".5"/><circle cx="8.5" cy="7.5" r=".5"/><circle cx="6.5" cy="12.5" r=".5"/><path d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z"/></IconBase>;
        const Calendar = (props) => <IconBase {...props}><rect width="18" height="18" x="3" y="4" rx="2" ry="2"/><line x1="16" x2="16" y1="2" y2="6"/><line x1="8" x2="8" y1="2" y2="6"/><line x1="3" x2="21" y1="10" y2="10"/></IconBase>;
        const Clock = (props) => <IconBase {...props}><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></IconBase>;
        const AlertCircle = (props) => <IconBase {...props}><circle cx="12" cy="12" r="10"/><line x1="12" x2="12" y1="8" y2="12"/><line x1="12" x2="12.01" y1="16" y2="16"/></IconBase>;
        const ArrowRight = (props) => <IconBase {...props}><path d="M5 12h14"/><path d="m12 5 7 7-7 7"/></IconBase>;
        const Moon = (props) => <IconBase {...props}><path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"/></IconBase>;
        const FileQuestion = (props) => <IconBase {...props}><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><path d="M10 10.3c.2-.4.5-.8.9-1a2.1 2.1 0 0 1 2.6.4c.3.4.5.8.5 1.3 0 1.3-2 2-2 2"/><path d="M12 17h.01"/></IconBase>;

        // 自定義 SVG 圖標
        const IchthysIcon = ({ className, style }) => (<svg viewBox="0 0 100 40" className={className} style={style} fill="none" stroke="currentColor" strokeWidth="2"><path d="M10,20 Q30,0 70,20 Q90,30 95,20 Q90,10 70,20 Q30,40 10,20 M70,20 L95,20" /></svg>);
        
        // 修改：五餅二魚圖標 (五個圓圈 + 兩隻面對面的魚)
        const FiveLoavesTwoFishIcon = ({ className, style }) => (
            <svg viewBox="0 0 100 70" className={className} style={style} fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                {/* 五個圓圈 (餅) */}
                <circle cx="20" cy="15" r="5.5" />
                <circle cx="35" cy="15" r="5.5" />
                <circle cx="50" cy="15" r="5.5" />
                <circle cx="65" cy="15" r="5.5" />
                <circle cx="80" cy="15" r="5.5" />
                
                {/* 左邊的魚 (向右游) */}
                <path d="M28,45 Q38,35 46,45 Q38,55 28,45" />
                <path d="M28,45 L24,40 M28,45 L24,50" />

                {/* 右邊的魚 (向左游，面對面) */}
                <path d="M72,45 Q62,35 54,45 Q62,55 72,45" />
                <path d="M72,45 L76,40 M72,45 L76,50" />
            </svg>
        );

        const CrossIcon = ({ className }) => (<svg viewBox="0 0 24 24" className={className} fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><line x1="12" y1="4" x2="12" y2="20" /><line x1="8" y1="9" x2="16" y2="9" /></svg>);

        // --- Data ---
        const RESUME_DATA = { 
            name: "Lin", 
            title: "品牌營運規劃師", 
            tagline: "用線條描繪信仰，用色彩溫暖生活", 
            intro: "你好，我是 Lin。一位結合美學與邏輯的品牌營運規劃師。", 
            experience: [ 
                { year: "2025 - Present", title: "行政社群小編", company: "德客設計 (沐森德客)", desc: "負責室內設計與咖啡廳品牌的社群管理、視覺設計與文案撰寫。" }, 
                { year: "2020 - 2024", title: "自媒體行政與社群美編", company: "基督教旌旗文化協會", desc: "負責自媒體平台的行政管理與社群美編製作。" }, 
                { year: "1994 - 2019", title: "資深行政與專案管理", company: "物業管理與各類企業", desc: "累積超過 25 年行政資歷，專精於行政制度建立與 SOP 優化。" }, 
            ], 
            services: [ 
                { id: "admin", name: "行政制度與SOP建置", price: "5,000-50,000" }, 
                { id: "social", name: "社群素材設計", price: "500-2,000" }, 
                { id: "print", name: "各類印刷品", price: "1,000-5,000" }, 
                { id: "video", name: "短影音剪輯", price: "500-3,000" }, 
                { id: "web", name: "一頁式網站設計", price: "5,000-20,000" }, 
                { id: "other", name: "其他(請加line聊聊)", price: "免費諮詢" }, 
            ] 
        };
        const NATIONAL_HOLIDAYS = ["2024-01-01", "2024-02-08", "2024-02-09", "2024-02-10", "2024-02-11", "2024-02-12", "2024-02-13", "2024-02-14", "2024-02-28", "2024-04-04", "2024-04-05", "2024-05-01", "2024-06-10", "2024-09-17", "2024-10-10", "2025-01-01", "2025-01-25", "2025-01-26", "2025-01-27", "2025-01-28"];
        const MOCK_BOOKED_SLOTS = {};
        const PORTFOLIO_CATEGORIES = [ { id: 'all', label: '全部' }, { id: 'card', label: '名片' }, { id: 'logo', label: 'Logo' }, { id: 'envelope', label: '卡片信封' }, { id: 'video', label: '影音' }, { id: 'copy', label: '社群文案' }, ];
        const PORTFOLIO_ITEMS = [ { id: 'copy-1', category: 'copy', title: '把日子過成詩。DMD 幫您打造令人一眼心動的質感宅', content: '剛買了喜歡的新家，卻不想將就於千篇一律的樣品屋設計？想要一面能說故事的牆、一處能讓心靈沉澱的角落？在 DMD 德客設計眼中，每一個空間，都是一首待譜的詩。', tags: ['#德客設計', '#空間美學', '#質感生活'], date: '2024.03' }, { id: 'copy-2', category: 'copy', title: '一天少喝一杯飲料，你的公司就擁有一個合法地址', content: '剛開始創業，最怕什麼？不是案子不夠，而是錢花錯地方。光瑤商務中心提供的借址登記服務，讓你用最省的方式，建立最必要的門面。不需要承擔高額租金，只要一天一杯飲料的花費，就能讓公司「合法、有地址、有形象」。', tags: ['#光瑤商務中心', '#借址登記', '#創業'], date: '2024.02' }, { id: 'copy-3', category: 'copy', title: '這不是搬家，是重生！', content: '您是否也住在充滿回憶，空間卻逐漸不敷使用的老房子裡？泛黃的磁磚、堆滿雜物的角落... DMD 德客設計的老屋翻新魔法，保留家的輪廓，卻徹底重寫了生活的質感。', tags: ['#老屋翻新', '#舊屋改造', '#極簡風'], date: '2024.01' }, { id: 'copy-4', category: 'copy', title: '電視牆做對，客廳立刻輕兩公斤', content: '很多家的擁擠，不是因為坪數小，是因為電視櫃太大。把電視牆「做對」，讓客廳瞬間清爽兩倍。捨棄笨重電視櫃，壁掛電視＋整線設計，畫面乾淨不雜亂。', tags: ['#統包公主', '#客廳裝修', '#收納設計'], date: '2023.12' }, { id: 'copy-5', category: 'copy', title: '嘴巴寂寞的時候，犀牛餐盒最懂你的胃', content: '有些日子，不是餓，是心有點空。這時候，一份剛剛好的餐盒最能填補你的情緒。雞腿排煎到外皮微脆、肉汁剛好鎖住，配上熱熱的白飯，第一口就讓忙碌的煩燥感慢慢退下去。', tags: ['#犀牛咖啡', '#美食療癒', '#便當'], date: '2023.11' }, { id: 'card-1', category: 'card', title: '犀牛店長名片設計', image: 'https://drive.google.com/uc?export=view&id=1dqkL9vYVvSDZ8Qf19TqJEPwaeA4-kzth', desc: '結合咖啡與藝術的簡約設計，傳遞專業與溫暖。', }, { id: 'card-2', category: 'card', title: '婕雨非凡名片', image: 'https://drive.google.com/uc?export=view&id=1R8FgTe03UdCWl7sMSqQCNHzpx7N43wvK', desc: '展現國際貿易的專業形象，清晰俐落的排版。', }, { id: 'card-3', category: 'card', title: 'Joy Leaf 名片', image: 'https://drive.google.com/uc?export=view&id=1Bez6D5nnwjIHLL7fYk6xNnH_RrJ7N96B', desc: '自然清新的品牌風格，搭配優雅的字體設計。', }, { id: 'logo-1', category: 'logo', title: 'Joy Leaf 品牌 Logo', image: 'https://drive.google.com/uc?export=view&id=1jnx6s4Zr-Q6tQsFVRG0A0vqZYsnlW5XT', desc: '象徵自然與生機的葉片設計，傳遞品牌的生命力。', }, { id: 'logo-2', category: 'logo', title: 'C&C Logo 設計', image: 'https://drive.google.com/uc?export=view&id=1UDt1I973Xf0SS_BgkACZrQ2u-Oda6EzY', desc: '簡約時尚的字母組合，展現現代感與連結性。', }, { id: 'logo-3', category: 'logo', title: '沁手創茶飲 Logo', image: 'https://drive.google.com/uc?export=view&id=1is1pLNKlzC0lNreJdDUJC6nvHNYNg2In', desc: '結合茶葉意象與手寫字體，營造職人手作的溫暖氛圍。', }, { id: 'env-1', category: 'envelope', title: '沐森集團中秋祝福卡', image: 'https://drive.google.com/uc?export=view&id=1GfOYzd2zWGlzHcq5n8UccGlbzdrn8qZU', desc: '月光下的思念與祝福，傳遞企業對客戶的感謝。', }, { id: 'env-2', category: 'envelope', title: '聖誕佳節賀卡', image: 'https://drive.google.com/uc?export=view&id=10xjdGfwO3FsLSZBnxrgJBQ6sKOeTNyht', desc: '溫馨的聖誕配色與手繪插圖，為節日增添暖意。', }, { id: 'env-3', category: 'envelope', title: '中式信封設計', image: 'https://drive.google.com/uc?export=view&id=1kq7uey3r23IbceWNHufajNhao90sMdR3', desc: '傳統與現代結合的信封設計，展現品牌文化底蘊。', }, { id: 'notice-1', category: 'video', title: '電子支付公告', image: 'https://drive.google.com/uc?export=view&id=1dO5t0NFHwKyYFMglBjQ5Db4hd35iakC7', desc: '清晰易懂的資訊排版，有效傳達重要訊息。', }, { id: 'notice-2', category: 'video', title: '光瑤全球商務中心DM', image: 'https://drive.google.com/uc?export=view&id=1DrLynFDFpQYuxbWvgXGWXtTsE32SrJJk', desc: '整合服務項目的圖文選單，讓客戶一目了然。', }, { id: 'notice-3', category: 'video', title: '統包公主服務介紹', image: 'https://drive.google.com/uc?export=view&id=1BiB1g8HygbAMur-LDyfE87VXi7nakVN8', desc: '親切專業的形象設計，拉近與客戶的距離。', }, ];

        const copyToClipboard = (text) => {
            try {
                const textArea = document.createElement("textarea");
                textArea.value = text;
                textArea.style.position = "fixed";
                textArea.style.left = "-9999px";
                textArea.style.top = "0";
                document.body.appendChild(textArea);
                textArea.focus();
                textArea.select();
                return new Promise((resolve, reject) => {
                    const successful = document.execCommand('copy');
                    document.body.removeChild(textArea);
                    if (successful) resolve();
                    else {
                        if (navigator.clipboard && window.isSecureContext) navigator.clipboard.writeText(text).then(resolve, reject);
                        else reject(new Error("Copy failed"));
                    }
                });
            } catch (error) { return Promise.reject(error); }
        };

        const callGeminiMuse = async (prompt) => {
            const apiKey = ""; 
            if (!apiKey) return new Promise(resolve => setTimeout(() => resolve({ palette: ["#8b7355", "#C4a484", "#f0e6dc", "#fff5eb", "#ffffff"], concept: "（演示模式：請設定 API Key）在這片寧靜的畫布上，我們看見了時間的流動與信仰的堅定。", fontSuggestion: "建議使用黑體搭配襯線體", quote: { text: "信心是未見之事的確據。", source: "希伯來書 11:1" } }), 1000));
            const systemInstruction = `You are a poetic visual design assistant named "Muse". Output strictly in JSON.`;
            try {
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`, { method: "POST", headers: { "Content-Type": "application/json" }, body: JSON.stringify({ contents: [{ parts: [{ text: `Generate a design concept for: ${prompt}` }] }], systemInstruction: { parts: [{ text: systemInstruction }] }, generationConfig: { responseMimeType: "application/json" } }) });
                if (!response.ok) throw new Error(`API Error: ${response.statusText}`);
                const data = await response.json();
                return JSON.parse(data.candidates?.[0]?.content?.parts?.[0]?.text);
            } catch (error) { throw error; }
        };

        const Background = () => (
            <div className="bg-layer">
                <div className="absolute top-[-10%] left-[-10%] w-[500px] h-[500px] rounded-full bg-[#E8DCC8] opacity-30 blur-[100px]"></div>
                <div className="absolute bottom-[-10%] right-[-10%] w-[600px] h-[600px] rounded-full bg-[#E0D0B8] opacity-20 blur-[120px]"></div>
                <div className="absolute top-[40%] left-[60%] w-[300px] h-[300px] rounded-full bg-[#F0E6D8] opacity-30 blur-[80px]"></div>
                <div className="absolute inset-0 opacity-10" style={{ backgroundImage: `url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.5'/%3E%3C/svg%3E")` }}></div>
                <div className="absolute inset-0">
                    {[...Array(8)].map((_, i) => <Star key={`star-${i}`} className="absolute text-[#C4A484] opacity-30 animate-pulse" size={Math.random() * 12 + 8} style={{ top: `${Math.random() * 100}%`, left: `${Math.random() * 100}%`, animationDelay: `${Math.random() * 5}s`, animationDuration: `${Math.random() * 3 + 2}s` }} />)}
                    {[...Array(3)].map((_, i) => <Moon key={`moon-${i}`} className="absolute text-[#DCC6B0] opacity-30" size={Math.random() * 16 + 12} style={{ top: `${Math.random() * 80 + 10}%`, left: `${Math.random() * 80 + 10}%`, transform: `rotate(${Math.random() * 360}deg)` }} />)}
                    {[...Array(4)].map((_, i) => <IchthysIcon key={`fish-${i}`} className="absolute text-[#C4A484] opacity-20" style={{ width: `${Math.random() * 40 + 30}px`, top: `${Math.random() * 90}%`, left: `${Math.random() * 90}%`, transform: `rotate(${Math.random() * 60 - 30}deg)` }} />)}
                </div>
            </div>
        );

        // --- Nav Components (更新) ---
        // 修改：NavButton 改為純文字，移除 icon
        const NavButton = ({ active, onClick, label }) => (
            <button onClick={onClick} className={`nav-btn ${active ? 'active' : 'inactive'}`}>
                <span className="nav-label">{label}</span>
            </button>
        );

        const MuseButton = ({ onClick }) => (
            <div className="muse-btn-wrapper">
                <button onClick={onClick} className="muse-btn">
                    <Sparkles size={24} className="animate-pulse" />
                </button>
            </div>
        );

        const SocialButton = ({ href, icon: Icon, label, primary = false, copyValue }) => {
            const [copied, setCopied] = useState(false);
            const handleCopy = (e) => { e.preventDefault(); if (copyValue) copyToClipboard(copyValue).then(() => { setCopied(true); setTimeout(() => setCopied(false), 2000); }); };
            return (
                <div className="flex items-center gap-2 w-full">
                    <a href={href} target="_blank" rel="noopener noreferrer" className={`flex-1 flex items-center justify-center gap-2 px-6 py-3 rounded-xl transition-all duration-300 shadow-sm border ${primary ? 'bg-[#8b7355] text-white border-[#8b7355] hover:bg-[#725e45]' : 'bg-white/60 text-[#8b7355] border-[#C4a484]/30 hover:bg-white'} backdrop-blur-md`}>
                        <Icon size={18} /><span className="font-medium tracking-wide">{label}</span>
                    </a>
                    {copyValue && <button onClick={handleCopy} className="p-3 bg-white/60 border border-[#C4a484]/30 rounded-xl text-[#8b7355] hover:bg-white transition-all shadow-sm backdrop-blur-md active:scale-95" title="複製 ID">{copied ? <Check size={18} /> : <Copy size={18} />}</button>}
                </div>
            );
        };

        const SectionTitle = ({ title, subtitle }) => (
            <div className="flex flex-col items-center mb-8">
                <div className="flex items-center gap-2 text-[#C4a484] opacity-60 mb-1"><Star size={12} fill="currentColor" /><span className="text-xs uppercase tracking-[0.2em]">{subtitle}</span><Star size={12} fill="currentColor" /></div>
                <h2 className="text-2xl font-bold text-[#8b7355] tracking-widest">{title}</h2>
                <div className="w-12 h-[1px] bg-[#C4a484] mt-4 opacity-50" />
            </div>
        );

        const MuseBrewModal = ({ isOpen, onClose }) => {
            const [input, setInput] = useState('');
            const [isLoading, setIsLoading] = useState(false);
            const [result, setResult] = useState(null);
            const [error, setError] = useState(null);
            const handleBrew = async (e) => { e.preventDefault(); if (!input.trim()) return; setIsLoading(true); setError(null); setResult(null); try { const data = await callGeminiMuse(input); setResult(data); } catch (err) { console.error(err); setError("靈感連線失敗，請稍後再試。"); } finally { setIsLoading(false); } };
            if (!isOpen) return null;
            return (
                <div className="fixed inset-0 z-[1000] flex items-center justify-center px-4">
                    <div className="absolute inset-0 bg-[#8b7355]/30 backdrop-blur-sm cursor-pointer" onClick={onClose} />
                    <div className="bg-[#F9F7F2] w-full max-w-sm rounded-3xl p-6 relative shadow-xl border border-[#fff] animate-fade-in-up z-[1001] cursor-auto">
                        <button onClick={onClose} className="absolute top-4 right-4 text-[#C4a484] hover:text-[#8b7355]"><X size={24} /></button>
                        <div className="flex flex-col items-center mb-6">
                            <div className="w-12 h-12 rounded-full bg-gradient-to-tr from-[#C4a484] to-[#fff] flex items-center justify-center mb-3 shadow-inner"><Sparkles className="text-[#8b7355]" size={20} /></div>
                            <h3 className="text-xl font-bold text-[#8b7355] tracking-widest">靈感特調</h3>
                            <p className="text-xs text-[#C4a484] mt-1">AI 視覺靈感生成器 ✨</p>
                        </div>
                        <form onSubmit={handleBrew} className="mb-6 relative">
                            <input type="text" placeholder="輸入心情，例如：雨後的台北..." className="w-full bg-white border border-[#C4a484]/30 rounded-2xl py-3 pl-4 pr-12 text-[#8b7355] placeholder-[#C4a484]/50 focus:outline-none focus:border-[#8b7355]" value={input} onChange={(e) => setInput(e.target.value)} />
                            <button type="submit" disabled={isLoading || !input} className="absolute right-2 top-1/2 -translate-y-1/2 p-2 bg-[#8b7355] text-white rounded-xl disabled:opacity-50 hover:bg-[#725e45] transition-colors">{isLoading ? <Loader2 size={16} className="animate-spin" /> : <Sparkles size={16} />}</button>
                        </form>
                        {error && <div className="text-center text-red-400 text-sm mb-4">{error}</div>}
                        {result && (
                            <div className="space-y-4 animate-fade-in">
                                <div className="flex justify-between items-center bg-white/60 p-3 rounded-xl border border-white">
                                {result.palette.map((color, idx) => ( <div key={idx} className="flex flex-col items-center gap-1"><div className="w-10 h-10 rounded-full shadow-sm border border-white/50" style={{ backgroundColor: color }} /><span className="text-[9px] text-[#8b7355]/70 uppercase font-mono">{color}</span></div> ))}
                                </div>
                                <div className="bg-white/60 p-4 rounded-xl border border-white">
                                <p className="text-sm text-[#8b7355] leading-relaxed font-serif text-justify">{result.concept}</p>
                                {result.quote && ( <div className="mt-4 pt-4 border-t border-[#C4a484]/20 text-center"><p className="text-sm text-[#8b7355] font-serif italic mb-2 tracking-wide leading-loose">"{result.quote.text}"</p><p className="text-xs text-[#C4a484] uppercase tracking-wider font-medium">— 《{result.quote.source}》</p></div> )}
                                <div className="mt-3 pt-3 border-t border-[#C4a484]/10 flex items-center gap-2"><Palette size={14} className="text-[#C4a484]" /><span className="text-xs text-[#8b7355]/70">{result.fontSuggestion}</span></div>
                                </div>
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        const ResumeView = () => {
            const [formData, setFormData] = useState({ name: '', service: 'admin', date: '', time: '', description: '' });
            const [availableSlots, setAvailableSlots] = useState([]);
            const [dateError, setDateError] = useState('');
            const [submitStatus, setSubmitStatus] = useState('idle');
            const [lineChatUrl, setLineChatUrl] = useState('');

            useEffect(() => {
                const today = new Date().toISOString().split('T')[0];
                MOCK_BOOKED_SLOTS[today] = ["14:00", "15:00"]; 
            }, []);

            const handleDateChange = (e) => {
                const selectedDate = e.target.value;
                setFormData(prev => ({ ...prev, date: selectedDate, time: '' }));
                setDateError('');
                setAvailableSlots([]);
                setSubmitStatus('idle');
                if (!selectedDate) return;
                const dateObj = new Date(selectedDate);
                const dayOfWeek = dateObj.getDay();
                if (dayOfWeek === 0 || dayOfWeek === 6) { setDateError('週末為公休日，請選擇平日'); return; }
                if (NATIONAL_HOLIDAYS.includes(selectedDate)) { setDateError('該日為國定假日，暫停服務'); return; }
                const slots = [];
                const bookedForDay = MOCK_BOOKED_SLOTS[selectedDate] || [];
                for (let hour = 10; hour <= 16; hour += 2) {
                    if (hour === 12) continue;
                    const timeString = `${hour.toString().padStart(2, '0')}:00`;
                    const isBooked = bookedForDay.includes(timeString);
                    slots.push({ time: timeString, available: !isBooked });
                }
                setAvailableSlots(slots);
            };

            const isFormValid = formData.name.trim() !== '' && formData.date !== '' && formData.time !== '' && formData.description.trim() !== '' && !dateError;

            const handleBookSubmit = (e) => {
                e.preventDefault();
                if (!isFormValid) { alert("請填寫所有欄位"); return; }
                const serviceName = RESUME_DATA.services.find(s => s.id === formData.service)?.name || formData.service;
                const message = `你好，我想預約諮詢：\n-----------------\n姓名：${formData.name}\n日期：${formData.date}\n時間：${formData.time}\n服務：${serviceName}\n說明：${formData.description}\n-----------------\n(已從網站複製預約內容)`;
                const chatUrl = `https://line.me/R/oaMessage/@469cjlho/?${encodeURIComponent(message)}`;
                setLineChatUrl(chatUrl);
                copyToClipboard(message).then(() => { setSubmitStatus('copied'); setTimeout(() => window.open(chatUrl, "_blank"), 300); }).catch((err) => { console.error("Copy failed", err); setSubmitStatus('copied'); window.open(chatUrl, "_blank"); });
            };

            return (
                <div className="space-y-12 animate-fade-in px-2">
                    <section>
                        <SectionTitle title="經歷" subtitle="Experience" />
                        <div className="relative border-l border-[#C4a484]/30 ml-4 space-y-8">
                            {RESUME_DATA.experience.map((exp, idx) => (
                                <div key={idx} className="relative pl-8">
                                    <div className="absolute -left-[5px] top-2 w-[9px] h-[9px] rounded-full bg-[#8b7355]"></div>
                                    <span className="text-xs font-medium text-[#C4a484] tracking-wider">{exp.year}</span>
                                    <h3 className="text-lg font-bold text-[#8b7355] mt-1">{exp.title}</h3>
                                    <p className="text-sm text-[#8b7355]/80 mb-2">{exp.company}</p>
                                    <p className="text-sm text-[#8b7355]/70 leading-relaxed">{exp.desc}</p>
                                </div>
                            ))}
                        </div>
                    </section>

                    <section className="relative">
                        <SectionTitle title="服務預約" subtitle="Services" />
                        <div className="bg-white/40 backdrop-blur-md rounded-3xl p-6 border border-white/50 shadow-sm">
                            <div className="flex justify-center mb-6"><FiveLoavesTwoFishIcon className="w-20 h-12 text-[#C4a484]/50" /></div>
                            <div className="grid grid-cols-1 gap-3 mb-6">
                                {RESUME_DATA.services.map((s) => ( <div key={s.id} className="flex justify-between items-center p-3 rounded-lg bg-white/50 border border-white/30"><span className="text-[#8b7355] font-medium">{s.name}</span><span className="text-[#C4a484] text-sm">{s.price}</span></div> ))}
                            </div>
                            <form onSubmit={handleBookSubmit} className="space-y-4">
                                <div><label className="block text-xs font-bold text-[#8b7355] mb-1 ml-1">姓名 <span className="text-red-400">*</span></label><input type="text" required className="w-full bg-white/60 border border-[#C4a484]/20 rounded-xl px-4 py-2 text-[#8b7355] focus:outline-none focus:border-[#C4a484] focus:ring-1 focus:ring-[#C4a484]/50 transition-all" onChange={e => setFormData({...formData, name: e.target.value})} /></div>
                                <div><label className="block text-xs font-bold text-[#8b7355] mb-1 ml-1">服務項目</label><div className="relative"><select className="w-full bg-white/60 border border-[#C4a484]/20 rounded-xl px-4 py-2 text-[#8b7355] focus:outline-none focus:border-[#C4a484] focus:ring-1 focus:ring-[#C4a484]/50 appearance-none transition-all" onChange={e => setFormData({...formData, service: e.target.value})} value={formData.service}><option value="admin">行政制度與SOP建置</option><option value="social">社群素材設計</option><option value="print">各類印刷品</option><option value="video">短影音剪輯</option><option value="web">一頁式網站設計</option><option value="other">其他(請加line聊聊)</option></select><ChevronRight className="absolute right-4 top-1/2 -translate-y-1/2 rotate-90 text-[#8b7355]/50 pointer-events-none" size={16} /></div></div>
                                <div className="grid grid-cols-2 gap-4">
                                    <div><label className="block text-xs font-bold text-[#8b7355] mb-1 ml-1 flex items-center gap-1"><Calendar size={12} /> 預約日期 <span className="text-red-400">*</span></label><input type="date" required className={`w-full bg-white/60 border rounded-xl px-4 py-2 text-[#8b7355] focus:outline-none transition-all ${dateError ? 'border-red-300 ring-1 ring-red-200' : 'border-[#C4a484]/20 focus:border-[#C4a484] focus:ring-1 focus:ring-[#C4a484]/50'}`} onChange={handleDateChange} min={new Date().toISOString().split('T')[0]} />{dateError && <div className="text-[10px] text-red-500 mt-1 flex items-center gap-1 animate-fade-in"><AlertCircle size={10} /> {dateError}</div>}</div>
                                    <div><label className="block text-xs font-bold text-[#8b7355] mb-1 ml-1 flex items-center gap-1"><Clock size={12} /> 預約時間 <span className="text-red-400">*</span></label><div className="relative"><select required disabled={availableSlots.length === 0} className="w-full bg-white/60 border border-[#C4a484]/20 rounded-xl px-4 py-2 text-[#8b7355] focus:outline-none focus:border-[#C4a484] focus:ring-1 focus:ring-[#C4a484]/50 appearance-none transition-all disabled:opacity-50 disabled:bg-gray-100" onChange={e => setFormData({...formData, time: e.target.value})} value={formData.time}><option value="">{availableSlots.length === 0 ? (formData.date ? "當日無可選時段" : "請先選擇日期") : "選擇時段"}</option>{availableSlots.map(slot => <option key={slot.time} value={slot.time} disabled={!slot.available}>{slot.time} {slot.available ? '' : '(已預約)'}</option>)}</select><ChevronRight className="absolute right-4 top-1/2 -translate-y-1/2 rotate-90 text-[#8b7355]/50 pointer-events-none" size={16} /></div></div>
                                </div>
                                <div><label className="block text-xs font-bold text-[#8b7355] mb-1 ml-1 flex items-center gap-1"><FileQuestion size={12} /> 問題描述 / 備註 <span className="text-red-400">*</span></label><textarea required className="w-full bg-white/60 border border-[#C4a484]/20 rounded-xl px-4 py-2 text-[#8b7355] focus:outline-none focus:border-[#C4a484] focus:ring-1 focus:ring-[#C4a484]/50 transition-all resize-none" rows="3" placeholder="請簡述您遇到的狀況或想諮詢的內容..." onChange={e => setFormData({...formData, description: e.target.value})} value={formData.description} /></div>
                                {submitStatus === 'idle' ? ( <button type="submit" disabled={!isFormValid} className="w-full bg-[#00B900] text-white py-3 rounded-xl font-medium tracking-wide shadow-md hover:bg-[#009900] transition-all active:scale-[0.98] flex justify-center items-center gap-2 mt-4 disabled:opacity-50 disabled:cursor-not-allowed"><MessageCircle size={20} fill="currentColor" className="text-white" /> Line 預約諮詢</button> ) : ( <a href={lineChatUrl} target="_blank" rel="noopener noreferrer" className="w-full bg-[#8b7355] text-white py-3 rounded-xl font-medium tracking-wide shadow-md hover:bg-[#725e45] transition-all active:scale-[0.98] flex justify-center items-center gap-2 mt-4 border border-[#C4a484]"><Check size={20} /> 已複製！點擊開啟 Line 貼上 <ArrowRight size={16} className="animate-pulse" /></a> )}
                            </form>
                        </div>
                    </section>

                    <section>
                        <SectionTitle title="聯絡我" subtitle="Contact" />
                        <div className="relative group">
                            <a href="mailto:annelin0321@hotmail.com" className="block w-full bg-white/40 backdrop-blur-md rounded-2xl p-6 border border-white/50 text-center group hover:bg-white/60 transition-all shadow-sm hover:shadow-md select-none"><div className="w-12 h-12 bg-[#8b7355]/10 rounded-full flex items-center justify-center mx-auto mb-3 group-hover:bg-[#8b7355]/20 transition-colors"><Mail className="text-[#8b7355]" size={24} /></div><p className="text-[#8b7355] font-medium tracking-wide">annelin0321@hotmail.com</p><p className="text-[#C4a484] text-xs mt-2 group-hover:text-[#8b7355] transition-colors">點擊開啟郵件軟體</p></a>
                            <button onClick={(e) => { e.preventDefault(); e.stopPropagation(); copyToClipboard("annelin0321@hotmail.com").then(() => alert("✅ Email 已複製！")).catch(() => alert("❌ 複製失敗")); }} className="absolute top-4 right-4 p-2 text-[#C4a484]/50 hover:text-[#8b7355] hover:bg-white/80 rounded-full transition-all z-10" title="複製 Email"><Copy size={18} /></button>
                        </div>
                    </section>
                </div>
            );
        };

        const PortfolioView = () => {
            const [filter, setFilter] = useState('all');
            const filteredItems = filter === 'all' ? PORTFOLIO_ITEMS : PORTFOLIO_ITEMS.filter(item => item.category === filter);

            return (
                <div className="animate-fade-in">
                    <div className="sticky top-0 bg-[#F9F7F2]/95 backdrop-blur-sm z-20 -mx-6 px-6 pt-2 pb-4 border-b border-[#C4a484]/10 mb-6">
                        <div className="flex overflow-x-auto gap-2 scrollbar-hide">
                            {PORTFOLIO_CATEGORIES.map(cat => ( <button key={cat.id} onClick={() => setFilter(cat.id)} className={`whitespace-nowrap px-4 py-2 rounded-full text-sm transition-all border ${filter === cat.id ? 'bg-[#8b7355] text-white border-[#8b7355] shadow-md' : 'bg-white/50 text-[#8b7355] border-[#C4a484]/20 hover:bg-white'}`}>{cat.label}</button> ))}
                        </div>
                    </div>
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-6 px-2">
                        {filteredItems.map(item => (
                            <div key={item.id} className="bg-white/40 backdrop-blur-md rounded-2xl overflow-hidden border border-white/60 shadow-sm hover:shadow-md transition-all group duration-500 animate-fade-in-up">
                                <div className="h-48 w-full relative flex items-center justify-center p-6 overflow-hidden" style={{ background: item.image || '#f0e6dc' }}>
                                    {item.image ? ( <img src={item.image} alt={item.title} className="w-full h-full object-cover group-hover:scale-105 transition-transform duration-700" onError={(e) => { e.target.onerror = null; e.target.style.display = 'none'; e.target.parentNode.innerHTML = `<div class="w-full h-full flex items-center justify-center bg-[#f0e6dc] text-[#8b7355]/50"><span class="text-sm">Image not available</span></div>`; }} /> ) : ( <div className="w-full h-full bg-white/80 backdrop-blur-sm p-4 rounded-lg shadow-inner flex flex-col items-center justify-center text-center"><p className="text-[#8b7355] text-sm font-medium line-clamp-3 leading-relaxed">{item.content}</p><div className="mt-3 w-8 h-[1px] bg-[#C4a484]" /></div> )}
                                    <div className="absolute inset-0 bg-[#8b7355]/0 group-hover:bg-[#8b7355]/10 transition-colors" />
                                </div>
                                <div className="p-5">
                                    <div className="flex justify-between items-start mb-2"><span className="text-[10px] text-[#C4a484] border border-[#C4a484]/30 px-2 py-0.5 rounded-full uppercase tracking-wider bg-white/50">{PORTFOLIO_CATEGORIES.find(c => c.id === item.category)?.label}</span>{item.date && <span className="text-[10px] text-[#8b7355]/50">{item.date}</span>}</div>
                                    <h3 className="text-lg font-bold text-[#8b7355] mb-2">{item.title}</h3>
                                    <p className="text-sm text-[#8b7355]/80 line-clamp-2 leading-relaxed">{item.content || item.desc}</p>
                                    {item.tags && <div className="flex flex-wrap gap-2 mt-3">{item.tags.map(tag => <span key={tag} className="text-xs text-[#C4a484] font-medium opacity-80">{tag}</span>)}</div>}
                                </div>
                            </div>
                        ))}
                    </div>
                </div>
            );
        };

        const App = () => {
            const [activeTab, setActiveTab] = useState('resume');
            const [isMuseOpen, setIsMuseOpen] = useState(false);

            return (
                <div style={{ width: '100%', overflowX: 'hidden' }}>
                    <Background />
                    <MuseBrewModal isOpen={isMuseOpen} onClose={() => setIsMuseOpen(false)} />
                    
                    {/* 主要內容容器 */}
                    <div className="max-w-md mx-auto flex flex-col relative px-6 w-full content-wrapper">
                        <header className="pt-12 pb-4 text-center relative animate-fade-in">
                            <div className="inline-block relative mb-4">
                                <div className="w-20 h-20 rounded-full bg-gradient-to-br from-[#C4a484] to-[#f0e6dc] p-1 shadow-lg mx-auto relative z-10"><div className="w-full h-full rounded-full bg-white flex items-center justify-center overflow-hidden"><span className="text-3xl font-serif text-[#8b7355] font-bold">L</span></div></div>
                                <CrossIcon className="absolute -top-2 -right-2 text-[#8b7355] w-6 h-6 rotate-12 drop-shadow-sm" />
                                <div className="absolute top-0 left-0 w-full h-full animate-ping opacity-20 bg-[#C4a484] rounded-full" />
                            </div>
                            <h1 className="text-xl font-bold tracking-widest text-[#8b7355] mb-1 flex items-center justify-center gap-2">{RESUME_DATA.name}<span className="text-[10px] font-normal opacity-50 block border border-[#8b7355]/30 rounded-full px-2 py-0.5 mt-1">EST. 2024</span></h1>
                            <p className="text-xs text-[#C4a484] font-medium tracking-wide mb-2 uppercase">{RESUME_DATA.title}</p>
                            
                            <div className="flex justify-center gap-3 mt-4">
                                <SocialButton href="https://www.instagram.com/forever.believe.in.jesus/" icon={Instagram} label="IG" />
                                <SocialButton href="https://line.me/R/ti/p/@469cjlho" icon={MessageCircle} label="Line" copyValue="@469cjlho" />
                            </div>
                        </header>

                        <main className="w-full">
                            {activeTab === 'resume' ? <ResumeView /> : <PortfolioView />}
                        </main>
                    </div>

                    {/* V12 核心: 固定懸浮導覽列 (整合 Resume / Muse / Portfolio) */}
                    <div className="nav-fixed-container">
                        <nav className="nav-pill">
                            <NavButton 
                                active={activeTab === 'resume'} 
                                onClick={() => setActiveTab('resume')} 
                                label="履歷" 
                            />
                            
                            <MuseButton onClick={() => setIsMuseOpen(true)} />
                            
                            <NavButton 
                                active={activeTab === 'portfolio'} 
                                onClick={() => setActiveTab('portfolio')} 
                                label="作品集" 
                            />
                        </nav>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
